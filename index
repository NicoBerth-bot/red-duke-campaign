import React, { useState, useEffect } from 'react';
import { Skull, Sword, Scroll, Map, ChevronDown, BookOpen, Shield, Flame, Ghost, Crown, Droplets } from 'lucide-react';

const App = () => {
  const [scrolled, setScrolled] = useState(false);

  useEffect(() => {
    const handleScroll = () => {
      setScrolled(window.scrollY > 50);
    };
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const eras = [
    { id: 'I', title: "Ère I : Le Duc Souterrain", year: "2276–2283", desc: "Le mal est insidieux. Enquêtes occultes et disparitions.", icon: <Ghost className="w-5 h-5" /> },
    { id: 'II', title: "Ère II : Le Seigneur Rouge", year: "2284–2290", desc: "La guerre ouverte. Moussillon devient une forteresse.", icon: <Sword className="w-5 h-5" /> },
    { id: 'III', title: "Ère III : Le Dragon", year: "2291–2295", desc: "Le réveil de Vaelorian et la haute fantaisie noire.", icon: <Flame className="w-5 h-5" /> },
    { id: 'IV', title: "Ère IV : Le Roi des Brumes", year: "2296–2300", desc: "L'apothéose. Moussillon devient un mythe vivant.", icon: <Crown className="w-5 h-5" /> },
  ];

  const characters = [
    {
      name: "Le Duc Rouge",
      title: "Seigneur Vampire & Fléau",
      desc: "Il ne recherche pas l'amour, mais la force. Il méprise la chevalerie qu'il considère comme une hypocrisie.",
      role: "Leader",
      // REMPLACEZ CECI PAR LE CHEMIN DE VOTRE IMAGE (ex: "./duc_rouge.jpg" ou une URL)
      image: "/path/to/your/duc_rouge.jpg", 
      color: "from-neutral-800 to-black"
    },
    {
      name: "Yseldra",
      title: "La Main Noire",
      desc: "Stratège froide. Pour elle, le vampirisme est une réforme politique nécessaire pour un ordre parfait.",
      role: "Politique",
      image: null, // Pas encore d'image
      color: "from-neutral-900 to-black"
    },
    {
      name: "Frère Osmont",
      title: "Le Sonneur Funèbre",
      desc: "Nécromancien pragmatique. 'Les morts sont plus honnêtes que les vivants.'",
      role: "Logistique",
      image: null,
      color: "from-stone-900 to-black"
    },
    {
      name: "Chevalier Malvoisin",
      title: "Le Roi Revenant",
      desc: "Un chevalier mort qui a gardé ses serments mais perdu son cœur. L'honneur dans la mort.",
      role: "Militaire",
      image: null,
      color: "from-zinc-900 to-black"
    }
  ];

  return (
    <div className="min-h-screen bg-[#0a0a0a] text-neutral-300 font-sans selection:bg-white selection:text-black">
      <style>{`
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=IM+Fell+English:ital@0;1&display=swap');
        .font-cinzel { font-family: 'Cinzel', serif; }
        .font-fell { font-family: 'IM Fell English', serif; }
        
        /* Effet de grain pour aspect vieux papier/film noir */
        .noise-bg {
          background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
        }

        /* Filtre Mordheim : Noir & Blanc, Contraste fort, Grain */
        .mordheim-filter {
          filter: grayscale(100%) contrast(120%) brightness(90%) sepia(10%);
          transition: filter 0.5s ease;
        }
        .mordheim-filter:hover {
          filter: grayscale(0%) contrast(100%) brightness(100%) sepia(0%);
        }
      `}</style>

      {/* Noise Overlay */}
      <div className="fixed inset-0 pointer-events-none noise-bg z-0 mix-blend-overlay"></div>

      {/* Navbar */}
      <nav className={`fixed top-0 w-full z-50 transition-all duration-500 ${scrolled ? 'bg-black/95 border-b border-neutral-800' : 'bg-transparent'}`}>
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex items-center justify-between h-20">
            <div className="flex items-center gap-3">
              <div className="border-2 border-white/20 p-1">
                <Skull className="text-white w-5 h-5" />
              </div>
              <span className="font-cinzel font-black text-xl tracking-[0.2em] text-white">GRIMOIRE<span className="text-red-700">.</span>NOIR</span>
            </div>
            <div className="hidden md:block">
              <div className="ml-10 flex items-baseline space-x-8 font-cinzel text-xs tracking-widest font-bold">
                <a href="#synopsis" className="hover:text-white transition-colors uppercase">Chronologie</a>
                <a href="#cour-noire" className="hover:text-white transition-colors uppercase">La Cour</a>
                <a href="#batailles" className="hover:text-white transition-colors uppercase">Rapports</a>
              </div>
            </div>
          </div>
        </div>
      </nav>

      {/* Hero Section */}
      <header className="relative h-screen flex items-center justify-center overflow-hidden bg-black">
        {/* Effet vignetage prononcé */}
        <div className="absolute inset-0 bg-[radial-gradient(circle_at_center,_transparent_0%,_#000000_90%)] z-10"></div>
        
        {/* Background abstrait N&B */}
        <div className="absolute inset-0 opacity-30 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] z-0 grayscale"></div>
        
        <div className="relative z-20 text-center px-4 max-w-5xl mx-auto border-y-2 border-neutral-900 py-12 bg-black/40 backdrop-blur-sm">
          <div className="mb-8 flex justify-center">
             <Crown className="w-8 h-8 text-neutral-500 animate-pulse" />
          </div>
          <h1 className="font-cinzel text-6xl md:text-8xl font-black text-white mb-4 tracking-tighter leading-none">
            MOUSSILLON
          </h1>
          <p className="font-cinzel text-red-700 tracking-[0.5em] text-lg md:text-xl uppercase mb-8 font-bold">
            L'Éveil des Morts
          </p>
          <p className="font-fell text-xl md:text-2xl text-neutral-400 max-w-2xl mx-auto mb-10 italic leading-relaxed">
            "Ici, même les ombres ont des dents. Une chronique de sang noir écrite à l'encre de la nuit."
          </p>
          <div className="flex justify-center gap-4">
            <a href="#synopsis" className="group px-8 py-3 bg-white text-black font-cinzel font-bold text-sm tracking-widest hover:bg-neutral-200 transition-all flex items-center gap-2">
              OUVRIR LE TOME
            </a>
          </div>
        </div>
      </header>

      {/* Synopsis & Timeline */}
      <section id="synopsis" className="py-24 px-4 bg-[#0f0f0f] relative border-t border-neutral-900">
        <div className="max-w-6xl mx-auto">
          <div className="grid md:grid-cols-2 gap-20">
            {/* Timeline */}
            <div className="space-y-12">
              <div className="border-l-2 border-neutral-800 pl-6 relative">
                 <h2 className="font-cinzel text-4xl text-white mb-8">La Spirale du Déclin</h2>
                 <p className="font-fell text-lg text-neutral-500 mb-10">
                   De l'année 2276 à la fin du siècle, chronique d'une terre abandonnée par la Dame et réclamée par le Sang.
                 </p>
              </div>
              
              <div className="space-y-0">
                {eras.map((era, idx) => (
                  <div key={era.id} className="relative pl-10 pb-12 border-l border-neutral-800 last:border-0 group">
                    <span className="absolute -left-[5px] top-2 w-2.5 h-2.5 bg-neutral-900 border border-neutral-600 rotate-45 group-hover:bg-white group-hover:border-white transition-all"></span>
                    <h3 className="text-white font-cinzel text-xl mb-1 group-hover:translate-x-1 transition-transform">{era.title}</h3>
                    <span className="text-red-900 font-bold font-mono text-xs block mb-2">{era.year}</span>
                    <p className="text-neutral-500 font-fell italic text-lg">{era.desc}</p>
                  </div>
                ))}
              </div>
            </div>

            {/* Carte Stylisée Mordheim */}
            <div className="relative h-full min-h-[500px] border-4 border-double border-neutral-800 p-2 bg-[#050505]">
              <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/black-scales.png')] opacity-20"></div>
              <div className="h-full w-full border border-neutral-800 flex flex-col items-center justify-center p-8 text-center bg-neutral-900/50 relative overflow-hidden group">
                {/* Effet d'encre */}
                <div className="absolute top-0 right-0 w-32 h-32 bg-black blur-3xl rounded-full opacity-50"></div>
                
                <Map className="w-20 h-20 text-neutral-700 mb-6 group-hover:text-white transition-colors" />
                <h3 className="font-cinzel text-2xl text-white mb-2">Cartographie Impie</h3>
                <p className="font-fell text-neutral-500 italic max-w-sm">
                  [Emplacement pour la carte générée style gravure ancienne]
                </p>
                <div className="mt-8 px-6 py-3 border border-neutral-700 text-neutral-400 text-xs tracking-[0.2em] hover:bg-white hover:text-black transition-all cursor-pointer">
                  VOIR LA CARTE
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* La Cour Noire */}
      <section id="cour-noire" className="py-24 px-4 bg-black border-y border-neutral-900">
        <div className="max-w-7xl mx-auto">
          <div className="flex flex-col md:flex-row justify-between items-end mb-16 border-b border-neutral-900 pb-8">
            <div>
              <h2 className="font-cinzel text-5xl text-white mb-2">La Cour Noire</h2>
              <p className="font-fell text-xl text-neutral-500 italic">Les quatre cavaliers de l'infamie.</p>
            </div>
            <div className="text-right hidden md:block">
              <Skull className="w-8 h-8 text-neutral-800 ml-auto mb-2" />
              <span className="text-neutral-700 font-mono text-xs uppercase">Target_ID: High_Threat</span>
            </div>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            {characters.map((char, idx) => (
              <div key={idx} className="group relative bg-[#0a0a0a] border border-neutral-800 hover:border-neutral-500 transition-colors duration-500">
                {/* Image Logic: Si une image est fournie, on l'affiche avec le filtre Mordheim */}
                <div className={`aspect-[3/4] w-full bg-gradient-to-b ${char.color} relative overflow-hidden`}>
                  
                  {char.image ? (
                    <>
                      <img 
                        src={char.image} 
                        alt={char.name}
                        className="w-full h-full object-cover mordheim-filter absolute inset-0 z-0"
                      />
                      {/* Overlay léger pour unifier le ton même avec l'image */}
                      <div className="absolute inset-0 bg-black/10 mix-blend-multiply z-10 pointer-events-none"></div>
                    </>
                  ) : (
                    <>
                      {/* Fallback si pas d'image */}
                      <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/diagmonds-light.png')] opacity-10 mix-blend-overlay"></div>
                      <div className="absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10">
                        <div className="w-full h-full border border-white/5 flex items-center justify-center group-hover:border-white/20 transition-all">
                          <span className="font-cinzel text-white/20 text-4xl font-black opacity-20 group-hover:opacity-40 transition-opacity">
                            {char.name.split(' ')[1]?.[0] || 'X'}
                          </span>
                        </div>
                        <span className="absolute bottom-4 text-[10px] text-neutral-500 uppercase tracking-widest bg-black/80 px-2 py-1">
                          [Générer Portrait]
                        </span>
                      </div>
                    </>
                  )}

                </div>
                
                <div className="p-6 border-t border-neutral-800 bg-[#0a0a0a] relative z-20">
                  <h3 className="font-cinzel text-lg text-white mb-1">{char.name}</h3>
                  <p className="text-[10px] font-bold text-red-900 uppercase tracking-[0.2em] mb-4">{char.title}</p>
                  <p className="text-sm text-neutral-400 font-fell italic leading-relaxed">
                    "{char.desc}"
                  </p>
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Battle Report */}
      <section id="batailles" className="py-24 px-4 bg-[#080808]">
        <div className="max-w-5xl mx-auto border border-neutral-800 bg-[#050505] p-8 md:p-12 relative overflow-hidden">
          {/* Tache d'encre décorative */}
          <div className="absolute -top-20 -right-20 w-64 h-64 bg-black rounded-full blur-3xl opacity-80 pointer-events-none"></div>
          
          <div className="relative z-10">
            <div className="flex items-start justify-between mb-10 pb-6 border-b border-neutral-900">
              <div>
                <span className="font-mono text-xs text-red-900 mb-2 block">RAPPORT #001</span>
                <h2 className="font-cinzel text-3xl md:text-4xl text-white">Le Bourg aux Feux Éteints</h2>
              </div>
              <Sword className="w-8 h-8 text-neutral-800" />
            </div>

            <div className="grid md:grid-cols-2 gap-12">
              <div className="prose prose-invert prose-p:font-fell prose-p:text-lg prose-p:text-neutral-400">
                <p>
                  <span className="text-5xl float-left mr-3 font-cinzel text-white mt-[-10px]">L</span>
                  orsque l’expédition bretonnienne parvint aux abords du bourg, il était déjà trop tard. Les morts-vivants occupaient les rues calcinées.
                </p>
                <p>
                  Les Loups Funestes furent repoussés, mais l'hubris des chevaliers les perdit. Ils se brisèrent sur les boucliers immobiles des <strong>Gardes des Cryptes</strong>.
                </p>
                <div className="pl-4 border-l-2 border-red-900 my-6 italic text-neutral-300">
                  "L’impact fut terrible… et inutile. Les lames mortes frappèrent avec une précision implacable, sans haine et sans pitié."
                </div>
                <p>
                  Seul le <strong>Sergent Gautier</strong> et la Damoiselle Alix tinrent bon, blessant le nécromancien Osmont avant que la nuit ne suspende le massacre.
                </p>
              </div>

              <div className="space-y-6">
                {/* Image Placeholder Battle */}
                <div className="aspect-video w-full bg-neutral-900 border border-neutral-800 relative group cursor-pointer overflow-hidden">
                   <div className="absolute inset-0 bg-black/60 group-hover:bg-black/40 transition-colors z-10"></div>
                   <div className="absolute inset-0 flex items-center justify-center z-20">
                     <span className="font-cinzel text-neutral-500 border border-neutral-600 px-4 py-2 text-xs uppercase tracking-widest group-hover:bg-white group-hover:text-black transition-all">
                       Voir la gravure
                     </span>
                   </div>
                   <div className="absolute bottom-2 right-2 z-20 flex gap-1">
                      <Droplets className="w-3 h-3 text-red-900" />
                   </div>
                </div>

                <div className="bg-neutral-900/30 p-6 border border-neutral-800">
                  <h4 className="font-cinzel text-white text-sm mb-4 uppercase tracking-wider">État des Pertes</h4>
                  <ul className="space-y-2 font-mono text-xs text-neutral-500">
                    <li className="flex justify-between">
                      <span>Chevaliers du Royaume</span>
                      <span className="text-neutral-300">Anéantis</span>
                    </li>
                    <li className="flex justify-between">
                      <span>Loups Funestes</span>
                      <span className="text-neutral-300">Détruits</span>
                    </li>
                    <li className="flex justify-between">
                      <span>Infanterie Squelette</span>
                      <span className="text-neutral-300">90% Opérationnel</span>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <footer className="bg-black py-16 text-center border-t border-neutral-900 mt-20">
        <Skull className="w-6 h-6 text-neutral-800 mx-auto mb-4" />
        <p className="font-cinzel text-neutral-600 text-sm tracking-widest">
          FIN DE L'ARCHIVE
        </p>
      </footer>
    </div>
  );
};

export default App;
