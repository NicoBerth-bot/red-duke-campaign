<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Le Grimoire Noir de Moussillon</title>
    
    <!-- 1. Tailwind CSS (Style) - Chargement direct -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. Polices d'écriture -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=IM+Fell+English:ital@0;1&display=swap" rel="stylesheet">
    
    <!-- 3. Icônes Lucide -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Configuration du Style Personnalisé -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        cinzel: ['Cinzel', 'serif'],
                        fell: ['IM Fell English', 'serif'],
                    },
                    colors: {
                        'grim-black': '#0a0a0a',
                        'grim-dark': '#0f0f0f',
                    }
                }
            }
        }
    </script>

    <style>
        /* Effet de grain "Film Noir" / Vieux Papier */
        .noise-bg {
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
            pointer-events: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0;
            mix-blend-mode: overlay;
        }

        /* Filtre Mordheim : Noir & Blanc, Contraste fort */
        .mordheim-filter {
            filter: grayscale(100%) contrast(120%) brightness(90%) sepia(10%);
            transition: filter 0.5s ease;
        }
        .mordheim-filter:hover {
            filter: grayscale(0%) contrast(100%) brightness(100%) sepia(0%);
        }

        /* Scrollbar stylisée */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }
    </style>
</head>
<body class="bg-grim-black text-neutral-300 font-sans selection:bg-white selection:text-black antialiased overflow-x-hidden">

    <!-- Overlay Grain -->
    <div class="noise-bg"></div>

    <!-- Navigation -->
    <nav id="navbar" class="fixed top-0 w-full z-50 transition-all duration-500 bg-transparent">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <div class="flex items-center gap-3">
                    <div class="border-2 border-white/20 p-1">
                        <i data-lucide="skull" class="text-white w-5 h-5"></i>
                    </div>
                    <span class="font-cinzel font-black text-xl tracking-[0.2em] text-white">GRIMOIRE<span class="text-red-700">.</span>NOIR</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-8 font-cinzel text-xs tracking-widest font-bold">
                        <a href="#synopsis" class="hover:text-white transition-colors uppercase">Chronologie</a>
                        <a href="#cour-noire" class="hover:text-white transition-colors uppercase">La Cour</a>
                        <a href="#batailles" class="hover:text-white transition-colors uppercase">Rapports</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="relative h-screen flex items-center justify-center overflow-hidden bg-black">
        <!-- Fond Vignetage -->
        <div class="absolute inset-0 bg-[radial-gradient(circle_at_center,_transparent_0%,_#000000_90%)] z-10"></div>
        <div class="absolute inset-0 opacity-30 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] z-0 grayscale"></div>
        
        <div class="relative z-20 text-center px-4 max-w-5xl mx-auto border-y-2 border-neutral-900 py-12 bg-black/40 backdrop-blur-sm">
            <div class="mb-8 flex justify-center">
                <i data-lucide="crown" class="w-8 h-8 text-neutral-500 animate-pulse"></i>
            </div>
            <h1 class="font-cinzel text-6xl md:text-8xl font-black text-white mb-4 tracking-tighter leading-none">
                MOUSSILLON
            </h1>
            <p class="font-cinzel text-red-700 tracking-[0.5em] text-lg md:text-xl uppercase mb-8 font-bold">
                L'Éveil des Morts
            </p>
            <p class="font-fell text-xl md:text-2xl text-neutral-400 max-w-2xl mx-auto mb-10 italic leading-relaxed">
                "Ici, même les ombres ont des dents. Une chronique de sang noir écrite à l'encre de la nuit."
            </p>
            <div class="flex justify-center gap-4">
                <a href="#synopsis" class="group px-8 py-3 bg-white text-black font-cinzel font-bold text-sm tracking-widest hover:bg-neutral-200 transition-all flex items-center gap-2">
                    OUVRIR LE TOME
                </a>
            </div>
        </div>
    </header>

    <!-- Synopsis Section -->
    <section id="synopsis" class="py-24 px-4 bg-grim-dark relative border-t border-neutral-900 z-10">
        <div class="max-w-6xl mx-auto">
            <div class="grid md:grid-cols-2 gap-20">
                <!-- Timeline -->
                <div class="space-y-12">
                    <div class="border-l-2 border-neutral-800 pl-6 relative">
                         <h2 class="font-cinzel text-4xl text-white mb-8">La Spirale du Déclin</h2>
                         <p class="font-fell text-lg text-neutral-500 mb-10">
                           De l'année 2276 à la fin du siècle, chronique d'une terre abandonnée par la Dame et réclamée par le Sang.
                         </p>
                    </div>
                    
                    <div id="timeline-container" class="space-y-0">
                        <!-- Généré par JS -->
                    </div>
                </div>

                <!-- Carte Stylisée -->
                <div class="relative h-full min-h-[500px] border-4 border-double border-neutral-800 p-2 bg-[#050505]">
                    <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/black-scales.png')] opacity-20"></div>
                    <div class="h-full w-full border border-neutral-800 flex flex-col items-center justify-center p-8 text-center bg-neutral-900/50 relative overflow-hidden group">
                        <div class="absolute top-0 right-0 w-32 h-32 bg-black blur-3xl rounded-full opacity-50"></div>
                        <i data-lucide="map" class="w-20 h-20 text-neutral-700 mb-6 group-hover:text-white transition-colors"></i>
                        <h3 class="font-cinzel text-2xl text-white mb-2">Cartographie Impie</h3>
                        <p class="font-fell text-neutral-500 italic max-w-sm">
                          [Emplacement pour la carte générée style gravure ancienne]
                        </p>
                        <button class="mt-8 px-6 py-3 border border-neutral-700 text-neutral-400 text-xs tracking-[0.2em] hover:bg-white hover:text-black transition-all cursor-pointer">
                          VOIR LA CARTE
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- La Cour Noire -->
    <section id="cour-noire" class="py-24 px-4 bg-black border-y border-neutral-900 z-10 relative">
        <div class="max-w-7xl mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-end mb-16 border-b border-neutral-900 pb-8">
                <div>
                    <h2 class="font-cinzel text-5xl text-white mb-2">La Cour Noire</h2>
                    <p class="font-fell text-xl text-neutral-500 italic">Les quatre cavaliers de l'infamie.</p>
                </div>
                <div class="text-right hidden md:block">
                    <i data-lucide="skull" class="w-8 h-8 text-neutral-800 ml-auto mb-2"></i>
                    <span class="text-neutral-700 font-mono text-xs uppercase">Target_ID: High_Threat</span>
                </div>
            </div>

            <div id="characters-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <!-- Personnages générés par JS -->
            </div>
        </div>
    </section>

    <!-- Rapport de Bataille -->
    <section id="batailles" class="py-24 px-4 bg-[#080808] z-10 relative">
        <div class="max-w-5xl mx-auto border border-neutral-800 bg-[#050505] p-8 md:p-12 relative overflow-hidden">
            <div class="absolute -top-20 -right-20 w-64 h-64 bg-black rounded-full blur-3xl opacity-80 pointer-events-none"></div>
            
            <div class="relative z-10">
                <div class="flex items-start justify-between mb-10 pb-6 border-b border-neutral-900">
                    <div>
                        <span class="font-mono text-xs text-red-900 mb-2 block">RAPPORT #001</span>
                        <h2 class="font-cinzel text-3xl md:text-4xl text-white">Le Bourg aux Feux Éteints</h2>
                    </div>
                    <i data-lucide="sword" class="w-8 h-8 text-neutral-800"></i>
                </div>

                <div class="grid md:grid-cols-2 gap-12">
                    <div class="prose prose-invert prose-p:font-fell prose-p:text-lg prose-p:text-neutral-400">
                        <p>
                            <span class="text-5xl float-left mr-3 font-cinzel text-white mt-[-10px]">L</span>
                            orsque l’expédition bretonnienne parvint aux abords du bourg, il était déjà trop tard. Les morts-vivants occupaient les rues calcinées.
                        </p>
                        <p>
                            Les Loups Funestes furent repoussés, mais l'hubris des chevaliers les perdit. Ils se brisèrent sur les boucliers immobiles des <strong>Gardes des Cryptes</strong>.
                        </p>
                        <div class="pl-4 border-l-2 border-red-900 my-6 italic text-neutral-300">
                            "L’impact fut terrible… et inutile. Les lames mortes frappèrent avec une précision implacable, sans haine et sans pitié."
                        </div>
                        <p>
                            Seul le <strong>Sergent Gautier</strong> et la Damoiselle Alix tinrent bon, blessant le nécromancien Osmont avant que la nuit ne suspende le massacre.
                        </p>
                    </div>

                    <div class="space-y-6">
                        <!-- Image Bataille Placeholder -->
                        <div class="aspect-video w-full bg-neutral-900 border border-neutral-800 relative group cursor-pointer overflow-hidden">
                           <div class="absolute inset-0 bg-black/60 group-hover:bg-black/40 transition-colors z-10"></div>
                           <div class="absolute inset-0 flex items-center justify-center z-20">
                             <span class="font-cinzel text-neutral-500 border border-neutral-600 px-4 py-2 text-xs uppercase tracking-widest group-hover:bg-white group-hover:text-black transition-all">
                               Voir la gravure
                             </span>
                           </div>
                           <div class="absolute bottom-2 right-2 z-20 flex gap-1">
                              <i data-lucide="droplets" class="w-3 h-3 text-red-900"></i>
                           </div>
                        </div>

                        <div class="bg-neutral-900/30 p-6 border border-neutral-800">
                            <h4 class="font-cinzel text-white text-sm mb-4 uppercase tracking-wider">État des Pertes</h4>
                            <ul class="space-y-2 font-mono text-xs text-neutral-500">
                                <li class="flex justify-between">
                                    <span>Chevaliers du Royaume</span>
                                    <span class="text-neutral-300">Anéantis</span>
                                </li>
                                <li class="flex justify-between">
                                    <span>Loups Funestes</span>
                                    <span class="text-neutral-300">Détruits</span>
                                </li>
                                <li class="flex justify-between">
                                    <span>Infanterie Squelette</span>
                                    <span class="text-neutral-300">90% Opérationnel</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-black py-16 text-center border-t border-neutral-900 mt-20 relative z-10">
        <i data-lucide="skull" class="w-6 h-6 text-neutral-800 mx-auto mb-4"></i>
        <p class="font-cinzel text-neutral-600 text-sm tracking-widest">
            FIN DE L'ARCHIVE
        </p>
    </footer>

    <!-- LOGIQUE JAVASCRIPT -->
    <script>
        // 1. Données
        const eras = [
            { id: 'I', title: "Ère I : Le Duc Souterrain", year: "2276–2283", desc: "Le mal est insidieux. Enquêtes occultes et disparitions." },
            { id: 'II', title: "Ère II : Le Seigneur Rouge", year: "2284–2290", desc: "La guerre ouverte. Moussillon devient une forteresse." },
            { id: 'III', title: "Ère III : Le Dragon", year: "2291–2295", desc: "Le réveil de Vaelorian et la haute fantaisie noire." },
            { id: 'IV', title: "Ère IV : Le Roi des Brumes", year: "2296–2300", desc: "L'apothéose. Moussillon devient un mythe vivant." },
        ];

        const characters = [
            {
                name: "Le Duc Rouge",
                title: "Seigneur Vampire & Fléau",
                desc: "Il ne recherche pas l'amour, mais la force. Il méprise la chevalerie qu'il considère comme une hypocrisie.",
                image: "./img/red_duke.png",
                color: "from-neutral-800 to-black"
            },
            {
                name: "Yseldra",
                title: "La Main Noire",
                desc: "Stratège froide. Pour elle, le vampirisme est une réforme politique nécessaire pour un ordre parfait.",
                image: "./img/yseldra.png",
                color: "from-neutral-900 to-black"
            },
            {
                name: "Frère Osmont",
                title: "Le Sonneur Funèbre",
                desc: "Nécromancien pragmatique. 'Les morts sont plus honnêtes que les vivants.'",
                image: null,
                color: "from-stone-900 to-black"
            },
            {
                name: "Chevalier Malvoisin",
                title: "Le Roi Revenant",
                desc: "Un chevalier mort qui a gardé ses serments mais perdu son cœur. L'honneur dans la mort.",
                image: null,
                color: "from-zinc-900 to-black"
            }
        ];

        // 2. Génération du contenu au chargement
        document.addEventListener('DOMContentLoaded', () => {
            
            // Remplir la Timeline
            const timelineContainer = document.getElementById('timeline-container');
            eras.forEach(era => {
                const div = document.createElement('div');
                div.className = "relative pl-10 pb-12 border-l border-neutral-800 last:border-0 group";
                div.innerHTML = `
                    <span class="absolute -left-[5px] top-2 w-2.5 h-2.5 bg-neutral-900 border border-neutral-600 rotate-45 group-hover:bg-white group-hover:border-white transition-all"></span>
                    <h3 class="text-white font-cinzel text-xl mb-1 group-hover:translate-x-1 transition-transform">${era.title}</h3>
                    <span class="text-red-900 font-bold font-mono text-xs block mb-2">${era.year}</span>
                    <p class="text-neutral-500 font-fell italic text-lg">${era.desc}</p>
                `;
                timelineContainer.appendChild(div);
            });

            // Remplir les Personnages
            const charGrid = document.getElementById('characters-grid');
            characters.forEach(char => {
                const div = document.createElement('div');
                div.className = "group relative bg-[#0a0a0a] border border-neutral-800 hover:border-neutral-500 transition-colors duration-500";
                
                // Gestion de l'image ou du placeholder
                let imageContent = '';
                if(char.image) {
                    // Petite astuce : on utilise 'onerror' pour masquer l'image si le fichier n'existe pas
                    imageContent = `
                        <img src="${char.image}" alt="${char.name}" 
                             class="w-full h-full object-cover mordheim-filter absolute inset-0 z-0"
                             onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
                        <div class="hidden absolute inset-0 flex-col items-center justify-center p-6 text-center z-10">
                             <div class="w-full h-full border border-white/5 flex items-center justify-center">
                                <span class="font-cinzel text-white/20 text-4xl font-black">?</span>
                             </div>
                        </div>
                        <div class="absolute inset-0 bg-black/10 mix-blend-multiply z-10 pointer-events-none"></div>
                    `;
                } else {
                    imageContent = `
                        <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/diagmonds-light.png')] opacity-10 mix-blend-overlay"></div>
                        <div class="absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10">
                            <div class="w-full h-full border border-white/5 flex items-center justify-center group-hover:border-white/20 transition-all">
                                <span class="font-cinzel text-white/20 text-4xl font-black opacity-20 group-hover:opacity-40 transition-opacity">
                                    ${char.name.split(' ')[1]?.[0] || 'X'}
                                </span>
                            </div>
                            <span class="absolute bottom-4 text-[10px] text-neutral-500 uppercase tracking-widest bg-black/80 px-2 py-1">
                                [Générer Portrait]
                            </span>
                        </div>
                    `;
                }

                div.innerHTML = `
                    <div class="aspect-[3/4] w-full bg-gradient-to-b ${char.color} relative overflow-hidden">
                        ${imageContent}
                    </div>
                    <div class="p-6 border-t border-neutral-800 bg-[#0a0a0a] relative z-20">
                        <h3 class="font-cinzel text-lg text-white mb-1">${char.name}</h3>
                        <p class="text-[10px] font-bold text-red-900 uppercase tracking-[0.2em] mb-4">${char.title}</p>
                        <p class="text-sm text-neutral-400 font-fell italic leading-relaxed">"${char.desc}"</p>
                    </div>
                `;
                charGrid.appendChild(div);
            });

            // 3. Initialiser les icônes Lucide
            lucide.createIcons();

            // 4. Gestion du Scroll Navbar
            const navbar = document.getElementById('navbar');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    navbar.classList.add('bg-black/95', 'border-b', 'border-neutral-800');
                    navbar.classList.remove('bg-transparent');
                } else {
                    navbar.classList.remove('bg-black/95', 'border-b', 'border-neutral-800');
                    navbar.classList.add('bg-transparent');
                }
            });
        });
    </script>
</body>
</html>
